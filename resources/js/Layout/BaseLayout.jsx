import {Fragment, useState} from 'react'
import {Dialog, DialogPanel} from '@headlessui/react'
import {Bars3Icon} from '@heroicons/react/20/solid'
import {XMarkIcon} from '@heroicons/react/24/outline'
import {Link} from "@inertiajs/react";
import {useRoute} from 'ziggy-js';
import Notification from "../Components/Notification/Notification.jsx";

const BaseLayout = ({children}) => {
    const [mobileMenuOpen, setMobileMenuOpen] = useState(false)
    const route = useRoute();

    const navigation = [
        {name: 'Home', href: route('home')},
        {name: 'Récurrences', href: route('recurring.list')},
        {name: 'Catégories', href: route('category.list')}
    ]

    return (
        <>
            <header className="absolute inset-x-0 top-0 z-50 flex h-16 border-b border-gray-900/10">
                <div className="mx-auto flex w-full max-w-7xl items-center justify-between px-4 sm:px-6 lg:px-8">
                    <div className="flex flex-1 items-center gap-x-6">
                        <button type="button" onClick={() => setMobileMenuOpen(true)} className="-m-3 p-3 md:hidden">
                            <span className="sr-only">Open main menu</span>
                            <Bars3Icon aria-hidden="true" className="size-5 text-gray-900"/>
                        </button>
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" width={70}>
                            <g id="icons_without_caption" data-name="icons without caption">
                                <g id="MONEY">
                                    <path className="cls-1"
                                          d="M217 187.55h-4v4.82h-17a19.28 19.28 0 0 1 1.15-4.82h-4.23a22.45 22.45 0 0 0-.92 4.82H64a22.45 22.45 0 0 0-.92-4.82H58.9a19.27 19.27 0 0 1 1.1 4.82H43v-4.82h-4v8.82h178zM213 178.31v4.83-4.83zM213 178.31v4.83h-17a18.47 18.47 0 0 1 .43-2.49 20.41 20.41 0 0 1 .72-2.34h-4.22a22.78 22.78 0 0 0-1 5.24H64.08a22.77 22.77 0 0 0-1-5.24H58.9a22.3 22.3 0 0 1 .72 2.32 20.86 20.86 0 0 1 .43 2.51H43v-4.83h-4v9.24h178v-9.24zM213 169.08v4.83h-17a19.52 19.52 0 0 1 1.15-4.83h-4.22a22.59 22.59 0 0 0-1 5.23H64.08a22.59 22.59 0 0 0-1-5.23H58.9a22.3 22.3 0 0 1 .72 2.32 20.53 20.53 0 0 1 .43 2.51H43v-4.83h-4v9.23h178v-9.23zM213 169.08v4.83-4.83z"/>
                                    <path className="cls-1"
                                          d="M213 159.84v4.83h-17a20.18 20.18 0 0 1 .42-2.47 22.86 22.86 0 0 1 .73-2.35h-4.22a22.78 22.78 0 0 0-1 5.24H64.1a22.78 22.78 0 0 0-1-5.24h-4.2a19.71 19.71 0 0 1 .72 2.33 18.91 18.91 0 0 1 .43 2.5H43v-4.83h-4v9.24h178v-9.24zM213 150.61v4.83h-17a18.46 18.46 0 0 1 .43-2.49 20.42 20.42 0 0 1 .72-2.34h-4.22a22.6 22.6 0 0 0-1 5.23H64.1a22.59 22.59 0 0 0-1-5.23h-4.2a22.32 22.32 0 0 1 .72 2.32 20.86 20.86 0 0 1 .43 2.51H43v-4.83h-4v9.23h178v-9.23zM213 150.61v4.83-4.83z"/>
                                    <path className="cls-1"
                                          d="M217 84.78V59.63H39v91h178V84.78zm-4-21.15v17a19 19 0 0 1-13.44-7.81 18.23 18.23 0 0 1-2.24-4 18.68 18.68 0 0 1-1.32-5.19zm-170 0h17a18.69 18.69 0 0 1-1.32 5.23 19 19 0 0 1-2.22 4A19.17 19.17 0 0 1 43 80.68zm0 82.58v-17a19.11 19.11 0 0 1 16.62 14.49 20.53 20.53 0 0 1 .43 2.51zm21.1.4A23.11 23.11 0 0 0 52.28 128a21.93 21.93 0 0 0-5.07-2.1 22.52 22.52 0 0 0-4.21-.76V84.69a23.23 23.23 0 0 0 14.26-6.59 21.22 21.22 0 0 0 2.36-2.73 21.45 21.45 0 0 0 1.62-2.51 22.35 22.35 0 0 0 1.76-4 22.7 22.7 0 0 0 1.07-5.23h127.88a22.7 22.7 0 0 0 1.05 5.23 22.36 22.36 0 0 0 1.76 4 20.34 20.34 0 0 0 1.61 2.49 22.18 22.18 0 0 0 2.37 2.75 23.41 23.41 0 0 0 5.46 4 22.74 22.74 0 0 0 8.8 2.58v40.48a22.61 22.61 0 0 0-9.22 2.85 23.11 23.11 0 0 0-11.82 18.6zm131.86-.4a18.46 18.46 0 0 1 .43-2.49 19.27 19.27 0 0 1 12.39-13.63 18.65 18.65 0 0 1 4.18-.92v17z"/>
                                    <path className="cls-1"
                                          d="M154.89 100.56a25.42 25.42 0 0 0-1-4 25.75 25.75 0 0 0-2.38-5.23 27.28 27.28 0 0 0-47.07 0 25.75 25.75 0 0 0-2.38 5.23 25.42 25.42 0 0 0-1 4 26.39 26.39 0 0 0-.39 4.56v.68a24.35 24.35 0 0 0 .38 3.94.13.13 0 0 0 0 .06 25.59 25.59 0 0 0 1.2 4.55 26 26 0 0 0 2.18 4.62c.16.29.33.56.52.84s.36.57.56.84c.47.68 1 1.33 1.49 2 .28.34.57.66.86 1a26 26 0 0 0 2.92 2.73 24.37 24.37 0 0 0 2.64 1.89 25 25 0 0 0 4.24 2.18 22.19 22.19 0 0 0 2.91 1 1.3 1.3 0 0 0 .28.08 2 2 0 0 0 .33.09h.08a26.16 26.16 0 0 0 5.56.8h1.1c.37 0 1 0 1.56-.05s.83 0 1.25-.09a24.39 24.39 0 0 0 2.56-.4c.49-.09 1-.2 1.45-.32.82-.22 1.63-.47 2.42-.76.35-.12.69-.25 1-.4a25.42 25.42 0 0 0 4.25-2.18 24.39 24.39 0 0 0 2.64-1.89 26.87 26.87 0 0 0 2.92-2.73c.29-.32.58-.64.86-1 .52-.63 1-1.28 1.49-2 .2-.27.39-.56.56-.84s.36-.55.52-.84a26 26 0 0 0 2.18-4.62 25.57 25.57 0 0 0 1.2-4.55.13.13 0 0 0 0-.06 24.35 24.35 0 0 0 .38-3.94v-.68a26.39 26.39 0 0 0-.27-4.51zm-3.63 5.24a21.14 21.14 0 0 1-.29 3.1q-.06.42-.15.84v.06a23.49 23.49 0 0 1-1.44 4.56c-.14.32-.29.65-.45 1a23.31 23.31 0 0 1-2.23 3.64 21.61 21.61 0 0 1-1.56 1.88 23.42 23.42 0 0 1-3 2.74 23 23 0 0 1-3.91 2.43c-.59.29-1.2.56-1.82.8a21.79 21.79 0 0 1-3.79 1.12q-.8.17-1.62.27c-.33.05-.67.08-1 .11a3.74 3.74 0 0 1-.47 0q-.78.06-1.56.06h-1.1c-.65 0-1.3-.08-1.94-.17s-1.31-.2-2-.34a21.87 21.87 0 0 1-3.66-1.13q-.82-.33-1.62-.72a23.24 23.24 0 0 1-6.88-5.17 21.65 21.65 0 0 1-1.56-1.88 23.3 23.3 0 0 1-2.22-3.64c-.16-.32-.31-.65-.45-1a23.5 23.5 0 0 1-1.44-4.56v-.06q-.09-.42-.15-.84a21.11 21.11 0 0 1-.29-3.1v-.68a22.9 22.9 0 0 1 .45-4.56c.12-.59.26-1.18.42-1.75a21.28 21.28 0 0 1 .76-2.25 23.54 23.54 0 0 1 6.71-9.23 23.24 23.24 0 0 1 30 0 23.54 23.54 0 0 1 6.65 9.23 21.21 21.21 0 0 1 .76 2.25c.16.57.3 1.16.42 1.75a22.89 22.89 0 0 1 .45 4.56c0 .23 0 .45-.02.68z"/>
                                    <path className="cls-1"
                                          d="M137 109.8a5.79 5.79 0 0 0-2.11-3.2c-.13-.09-.26-.19-.39-.27a5.72 5.72 0 0 0-.85-.53 28.26 28.26 0 0 0-5-2 18.34 18.34 0 0 1-4.1-1.71 3.58 3.58 0 0 1-1.3-1.36.9.9 0 0 1-.11-.22 3.06 3.06 0 0 1-.23-1.2 3.19 3.19 0 0 1 1.49-2.8 5.86 5.86 0 0 1 3.2-.81 10.71 10.71 0 0 1 3.78.79h.11a12.42 12.42 0 0 1 2.82 1.52l.69-.86.54-.66.77-1a16.32 16.32 0 0 0-6.78-2.9V87.5h-2.66v5c-3.49.16-5.87 1.72-6.92 4a5.57 5.57 0 0 0-.4 1.08 7.22 7.22 0 0 0-.25 1.94 6.18 6.18 0 0 0 .07 1 5.39 5.39 0 0 0 1.79 3.48 9.87 9.87 0 0 0 2.91 1.76l.15.06c.83.36 1.72.67 2.63 1l.75.24c.69.22 1.32.42 1.91.64a7 7 0 0 1 3.37 2.08 2 2 0 0 1 .21.3 3.77 3.77 0 0 1 .48 1.94v.42a3.33 3.33 0 0 1-.95 2.06 2.68 2.68 0 0 1-.62.53.62.62 0 0 1-.17.11 5.59 5.59 0 0 1-2.3.77 7.12 7.12 0 0 1-1 .07 8.86 8.86 0 0 1-1.61-.15 10.26 10.26 0 0 1-2.57-.78h-.11a11.75 11.75 0 0 1-2.91-1.88c-.17-.14-.32-.29-.48-.44l-.09.11-2 2.38c.28.27.57.53.87.77a.44.44 0 0 0 .11.09 13.64 13.64 0 0 0 3.19 2 13.08 13.08 0 0 0 2.7.87c.42.09.85.16 1.28.21V124h2.66v-4.83a10.75 10.75 0 0 0 1.32-.18 8.51 8.51 0 0 0 1.58-.43 7.27 7.27 0 0 0 3.14-2.07 4.5 4.5 0 0 0 .4-.49 7 7 0 0 0 1.26-4.14v-.37a8.13 8.13 0 0 0-.27-1.69z"/>
                                </g>
                            </g>
                        </svg>
                    </div>
                    <nav className="hidden md:flex md:gap-x-11 md:text-sm/6 md:font-semibold md:text-gray-700">
                        {navigation.map((item, itemIdx) => (
                            <Link key={itemIdx} href={item.href}>
                                {item.name}
                            </Link>
                        ))}
                    </nav>
                </div>
                <Dialog open={mobileMenuOpen} onClose={setMobileMenuOpen} className="lg:hidden">
                    <div className="fixed inset-0 z-50"/>
                    <DialogPanel
                        className="fixed inset-y-0 left-0 z-50 w-full overflow-y-auto bg-white px-4 pb-6 sm:max-w-sm sm:px-6 sm:ring-1 sm:ring-gray-900/10">
                        <div className="-ml-0.5 flex h-16 items-center gap-x-6">
                            <button type="button" onClick={() => setMobileMenuOpen(false)}
                                    className="-m-2.5 p-2.5 text-gray-700">
                                <span className="sr-only">Close menu</span>
                                <XMarkIcon aria-hidden="true" className="size-6"/>
                            </button>
                            <div className="-ml-0.5">
                                <a href="#" className="-m-1.5 block p-1.5">
                                    <span className="sr-only">Your Company</span>
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" width={70}>
                                        <g id="icons_without_caption" data-name="icons without caption">
                                            <g id="MONEY">
                                                <path className="cls-1"
                                                      d="M217 187.55h-4v4.82h-17a19.28 19.28 0 0 1 1.15-4.82h-4.23a22.45 22.45 0 0 0-.92 4.82H64a22.45 22.45 0 0 0-.92-4.82H58.9a19.27 19.27 0 0 1 1.1 4.82H43v-4.82h-4v8.82h178zM213 178.31v4.83-4.83zM213 178.31v4.83h-17a18.47 18.47 0 0 1 .43-2.49 20.41 20.41 0 0 1 .72-2.34h-4.22a22.78 22.78 0 0 0-1 5.24H64.08a22.77 22.77 0 0 0-1-5.24H58.9a22.3 22.3 0 0 1 .72 2.32 20.86 20.86 0 0 1 .43 2.51H43v-4.83h-4v9.24h178v-9.24zM213 169.08v4.83h-17a19.52 19.52 0 0 1 1.15-4.83h-4.22a22.59 22.59 0 0 0-1 5.23H64.08a22.59 22.59 0 0 0-1-5.23H58.9a22.3 22.3 0 0 1 .72 2.32 20.53 20.53 0 0 1 .43 2.51H43v-4.83h-4v9.23h178v-9.23zM213 169.08v4.83-4.83z"/>
                                                <path className="cls-1"
                                                      d="M213 159.84v4.83h-17a20.18 20.18 0 0 1 .42-2.47 22.86 22.86 0 0 1 .73-2.35h-4.22a22.78 22.78 0 0 0-1 5.24H64.1a22.78 22.78 0 0 0-1-5.24h-4.2a19.71 19.71 0 0 1 .72 2.33 18.91 18.91 0 0 1 .43 2.5H43v-4.83h-4v9.24h178v-9.24zM213 150.61v4.83h-17a18.46 18.46 0 0 1 .43-2.49 20.42 20.42 0 0 1 .72-2.34h-4.22a22.6 22.6 0 0 0-1 5.23H64.1a22.59 22.59 0 0 0-1-5.23h-4.2a22.32 22.32 0 0 1 .72 2.32 20.86 20.86 0 0 1 .43 2.51H43v-4.83h-4v9.23h178v-9.23zM213 150.61v4.83-4.83z"/>
                                                <path className="cls-1"
                                                      d="M217 84.78V59.63H39v91h178V84.78zm-4-21.15v17a19 19 0 0 1-13.44-7.81 18.23 18.23 0 0 1-2.24-4 18.68 18.68 0 0 1-1.32-5.19zm-170 0h17a18.69 18.69 0 0 1-1.32 5.23 19 19 0 0 1-2.22 4A19.17 19.17 0 0 1 43 80.68zm0 82.58v-17a19.11 19.11 0 0 1 16.62 14.49 20.53 20.53 0 0 1 .43 2.51zm21.1.4A23.11 23.11 0 0 0 52.28 128a21.93 21.93 0 0 0-5.07-2.1 22.52 22.52 0 0 0-4.21-.76V84.69a23.23 23.23 0 0 0 14.26-6.59 21.22 21.22 0 0 0 2.36-2.73 21.45 21.45 0 0 0 1.62-2.51 22.35 22.35 0 0 0 1.76-4 22.7 22.7 0 0 0 1.07-5.23h127.88a22.7 22.7 0 0 0 1.05 5.23 22.36 22.36 0 0 0 1.76 4 20.34 20.34 0 0 0 1.61 2.49 22.18 22.18 0 0 0 2.37 2.75 23.41 23.41 0 0 0 5.46 4 22.74 22.74 0 0 0 8.8 2.58v40.48a22.61 22.61 0 0 0-9.22 2.85 23.11 23.11 0 0 0-11.82 18.6zm131.86-.4a18.46 18.46 0 0 1 .43-2.49 19.27 19.27 0 0 1 12.39-13.63 18.65 18.65 0 0 1 4.18-.92v17z"/>
                                                <path className="cls-1"
                                                      d="M154.89 100.56a25.42 25.42 0 0 0-1-4 25.75 25.75 0 0 0-2.38-5.23 27.28 27.28 0 0 0-47.07 0 25.75 25.75 0 0 0-2.38 5.23 25.42 25.42 0 0 0-1 4 26.39 26.39 0 0 0-.39 4.56v.68a24.35 24.35 0 0 0 .38 3.94.13.13 0 0 0 0 .06 25.59 25.59 0 0 0 1.2 4.55 26 26 0 0 0 2.18 4.62c.16.29.33.56.52.84s.36.57.56.84c.47.68 1 1.33 1.49 2 .28.34.57.66.86 1a26 26 0 0 0 2.92 2.73 24.37 24.37 0 0 0 2.64 1.89 25 25 0 0 0 4.24 2.18 22.19 22.19 0 0 0 2.91 1 1.3 1.3 0 0 0 .28.08 2 2 0 0 0 .33.09h.08a26.16 26.16 0 0 0 5.56.8h1.1c.37 0 1 0 1.56-.05s.83 0 1.25-.09a24.39 24.39 0 0 0 2.56-.4c.49-.09 1-.2 1.45-.32.82-.22 1.63-.47 2.42-.76.35-.12.69-.25 1-.4a25.42 25.42 0 0 0 4.25-2.18 24.39 24.39 0 0 0 2.64-1.89 26.87 26.87 0 0 0 2.92-2.73c.29-.32.58-.64.86-1 .52-.63 1-1.28 1.49-2 .2-.27.39-.56.56-.84s.36-.55.52-.84a26 26 0 0 0 2.18-4.62 25.57 25.57 0 0 0 1.2-4.55.13.13 0 0 0 0-.06 24.35 24.35 0 0 0 .38-3.94v-.68a26.39 26.39 0 0 0-.27-4.51zm-3.63 5.24a21.14 21.14 0 0 1-.29 3.1q-.06.42-.15.84v.06a23.49 23.49 0 0 1-1.44 4.56c-.14.32-.29.65-.45 1a23.31 23.31 0 0 1-2.23 3.64 21.61 21.61 0 0 1-1.56 1.88 23.42 23.42 0 0 1-3 2.74 23 23 0 0 1-3.91 2.43c-.59.29-1.2.56-1.82.8a21.79 21.79 0 0 1-3.79 1.12q-.8.17-1.62.27c-.33.05-.67.08-1 .11a3.74 3.74 0 0 1-.47 0q-.78.06-1.56.06h-1.1c-.65 0-1.3-.08-1.94-.17s-1.31-.2-2-.34a21.87 21.87 0 0 1-3.66-1.13q-.82-.33-1.62-.72a23.24 23.24 0 0 1-6.88-5.17 21.65 21.65 0 0 1-1.56-1.88 23.3 23.3 0 0 1-2.22-3.64c-.16-.32-.31-.65-.45-1a23.5 23.5 0 0 1-1.44-4.56v-.06q-.09-.42-.15-.84a21.11 21.11 0 0 1-.29-3.1v-.68a22.9 22.9 0 0 1 .45-4.56c.12-.59.26-1.18.42-1.75a21.28 21.28 0 0 1 .76-2.25 23.54 23.54 0 0 1 6.71-9.23 23.24 23.24 0 0 1 30 0 23.54 23.54 0 0 1 6.65 9.23 21.21 21.21 0 0 1 .76 2.25c.16.57.3 1.16.42 1.75a22.89 22.89 0 0 1 .45 4.56c0 .23 0 .45-.02.68z"/>
                                                <path className="cls-1"
                                                      d="M137 109.8a5.79 5.79 0 0 0-2.11-3.2c-.13-.09-.26-.19-.39-.27a5.72 5.72 0 0 0-.85-.53 28.26 28.26 0 0 0-5-2 18.34 18.34 0 0 1-4.1-1.71 3.58 3.58 0 0 1-1.3-1.36.9.9 0 0 1-.11-.22 3.06 3.06 0 0 1-.23-1.2 3.19 3.19 0 0 1 1.49-2.8 5.86 5.86 0 0 1 3.2-.81 10.71 10.71 0 0 1 3.78.79h.11a12.42 12.42 0 0 1 2.82 1.52l.69-.86.54-.66.77-1a16.32 16.32 0 0 0-6.78-2.9V87.5h-2.66v5c-3.49.16-5.87 1.72-6.92 4a5.57 5.57 0 0 0-.4 1.08 7.22 7.22 0 0 0-.25 1.94 6.18 6.18 0 0 0 .07 1 5.39 5.39 0 0 0 1.79 3.48 9.87 9.87 0 0 0 2.91 1.76l.15.06c.83.36 1.72.67 2.63 1l.75.24c.69.22 1.32.42 1.91.64a7 7 0 0 1 3.37 2.08 2 2 0 0 1 .21.3 3.77 3.77 0 0 1 .48 1.94v.42a3.33 3.33 0 0 1-.95 2.06 2.68 2.68 0 0 1-.62.53.62.62 0 0 1-.17.11 5.59 5.59 0 0 1-2.3.77 7.12 7.12 0 0 1-1 .07 8.86 8.86 0 0 1-1.61-.15 10.26 10.26 0 0 1-2.57-.78h-.11a11.75 11.75 0 0 1-2.91-1.88c-.17-.14-.32-.29-.48-.44l-.09.11-2 2.38c.28.27.57.53.87.77a.44.44 0 0 0 .11.09 13.64 13.64 0 0 0 3.19 2 13.08 13.08 0 0 0 2.7.87c.42.09.85.16 1.28.21V124h2.66v-4.83a10.75 10.75 0 0 0 1.32-.18 8.51 8.51 0 0 0 1.58-.43 7.27 7.27 0 0 0 3.14-2.07 4.5 4.5 0 0 0 .4-.49 7 7 0 0 0 1.26-4.14v-.37a8.13 8.13 0 0 0-.27-1.69z"/>
                                            </g>
                                        </g>
                                    </svg>
                                </a>
                            </div>
                        </div>
                        <div className="mt-2 space-y-2">
                            {navigation.map((item) => (
                                <a
                                    key={item.name}
                                    href={item.href}
                                    className="-mx-3 block rounded-lg px-3 py-2 text-base/7 font-semibold text-gray-900 hover:bg-gray-50"
                                >
                                    {item.name}
                                </a>
                            ))}
                        </div>
                    </DialogPanel>
                </Dialog>
            </header>

            <main>
                <div className="space-y-16 py-16 xl:space-y-20">
                    <div className="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
                        <div className="mx-auto max-w-2xl lg:mx-0 lg:max-w-none mt-3">
                            {children}
                        </div>
                    </div>
                </div>
                <Notification/>
            </main>
        </>
    )
}

export default BaseLayout
